import{r,i as e,v as d,D as g,R as m,W as x,B as u,E as h,F as y,q as j,C as f}from"./index-177af73d.js";import{P as b}from"./PageHeaderLayout-805a497a.js";import{D as c}from"./Disclosure-57d01d1e.js";function N(t){const s=r.useMemo(()=>{var n;return(n=t.bearings)==null?void 0:n.filter(i=>{for(let a=0;a<i.items.length;a++)if(i.items[a].status!=="ok")return!0;return!1}).map((i,a)=>e.jsx(o,{...i},a))},[t.bearings]),l=r.useMemo(()=>{var n;return(n=t.bearings)==null?void 0:n.filter(i=>{for(let a=0;a<i.items.length;a++)if(i.items[a].status!=="ok")return!1;return!0}).map((i,a)=>e.jsx(o,{...i},a))},[t.bearings]);return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-black font-medium",children:t.title}),e.jsx("div",{className:"rounded bg-gray-40 px-2 py-1 text-sm",children:v(t.date)})]})}),e.jsx("div",{className:"w-full border border-gray-60"}),t.lastChange&&e.jsxs("div",{children:[e.jsx("div",{className:"ml-3 mb-2 text-sm font-medium text-gray-900",children:"Последняя замена ротера"}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-gray-20 px-4 py-2",children:[e.jsxs("div",{className:"text-black flex items-center justify-center rounded-lg bg-gray-40 px-4 py-2 text-lg font-medium",children:[t.lastChange.days," Сут"]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Прогноз"}),e.jsx("div",{className:d("h-3 w-3 animate-pulse rounded-full",t.lastChange.prediction.status==="ok"?"bg-green-300":"",t.lastChange.prediction.status==="warning"?"bg-yellow-600":"",t.lastChange.prediction.status==="danger"?"bg-red-1000":"")})]}),e.jsxs("div",{className:"font-medium text-gray-800",children:[t.lastChange.prediction.days," Сут"]})]})]})]}),e.jsx("img",{src:"/img/rotor_intro.png",alt:"rotor_intro",className:"h-auto w-full rounded-lg border-2 border-solid border-blue-200 bg-blue-100 p-2"}),e.jsx(c,{classNameTitle:"font-medium text-sm text-gray-900",initOpen:!0,title:"Предупреждение",children:e.jsx("div",{className:"flex flex-col gap-2",children:s})}),e.jsx(c,{classNameTitle:"font-medium text-sm text-gray-900",title:"Все подшипники",children:e.jsx("div",{className:"flex flex-col gap-2",children:l})}),e.jsx(u,{onClick:t.onSendMessageClick,theme:"gray",className:"w-max",children:"Отправить сообщение в SAP"})]})}const o=r.memo(function(s){return e.jsxs("div",{className:"flex items-center justify-between rounded bg-gray-20 px-4 py-1",children:[e.jsx("div",{className:"text-sm text-gray-1000",children:s.title}),e.jsx("div",{className:"flex items-center gap-1",children:s.items.map((l,n)=>e.jsx(w,{...l},n))})]},s.title)});function v(t){return String(t.getDay()<10?"0"+t.getDay():t.getDay())+"."+String(t.getMonth()+1<10?"0"+(t.getDay()+1):t.getDay()+1)+"."+String(t.getFullYear())}const w=r.memo(function(s){return e.jsxs("div",{className:d("inline-flex items-center justify-center rounded border border-solid px-2",s.status==="warning"?"border-yellow-400 bg-yellow-100 text-yellow-500":"",s.status==="danger"?"border-red-1000 bg-red-200 text-red-1000":"",s.status==="ok"?"border-gray-400 bg-gray-100 text-gray-500":""),children:[e.jsx("span",{children:s.type}),s.type==="T"?e.jsx(g,{}):s.type==="V"?e.jsx(m,{}):e.jsx(x,{})]})});function S(){return e.jsxs(h,{children:[e.jsxs(b,{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-lg bg-yellow-600 p-2 text-white",children:e.jsx(y,{className:"h-4 w-4 fill-yellow-300"})}),e.jsx("div",{className:"text-sm font-medium",children:"Главный экран"})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(k,{}),e.jsx(p,{})]})]})}function k(){const t=[{icon:e.jsx(g,{className:"fill-black h-5 w-5"}),title:"Температура",letter:"T"},{icon:e.jsx(m,{className:"fill-black h-5  w-5"}),title:"Вибрация",letter:"V"},{icon:e.jsx(x,{className:"fill-black h-5  w-5"}),title:"Уровень масла",letter:"L"},{icon:e.jsx("div",{className:"h-4 w-4 rounded bg-yellow-700"}),title:"Предупреждение"},{icon:e.jsx("div",{className:"h-4 w-4 rounded bg-red-1000"}),title:"Опастность"}];return e.jsx("div",{className:"flex items-center justify-end gap-3",children:t.map(s=>e.jsxs("div",{className:"t flex items-center text-sm text-gray-900",children:[s.letter,s.icon,e.jsx("div",{className:"ml-2 font-extralight",children:s.title})]},s.title))})}function p(){const t=j(),s=[{title:"Агломашина №1",aglMachine:[{status:"danger",id:"У-171",title:"Эксгаузер У-171",onDetailsClick:()=>{t("/panel/machine/У-171")},rotor:{title:"Ротор № 37",date:new Date,lastChange:{days:6,prediction:{status:"danger",days:12}},bearings:[{title:"№3 п-к",items:[{status:"warning",type:"T"}]},{title:"№8 п-к",items:[{status:"ok",type:"L"},{type:"V",status:"danger"}]},{title:"№9 п-к",items:[{status:"ok",type:"T"},{status:"ok",type:"V"}]}]}},{status:"ok",id:"У-172",onDetailsClick:()=>{t("/panel/machine/У-172")},title:"Эксгаузер У-172",rotor:{title:"Ротор № 47",date:new Date,lastChange:{days:20,prediction:{status:"warning",days:25}}}}]},{title:"Агломашина №2",aglMachine:[{status:"danger",id:"У-171",title:"Эксгаузер У-171",onDetailsClick:()=>{t("/panel/machine/У-171")},rotor:{title:"Ротор № 37",date:new Date,lastChange:{days:6,prediction:{status:"danger",days:12}},bearings:[{title:"№3 п-к",items:[{status:"warning",type:"T"}]},{title:"№8 п-к",items:[{status:"ok",type:"L"},{type:"V",status:"danger"}]},{title:"№9 п-к",items:[{status:"ok",type:"T"},{status:"ok",type:"V"}]}]}},{status:"ok",id:"У-172",onDetailsClick:()=>{t("/panel/machine/У-172")},title:"Эксгаузер У-172",rotor:{title:"Ротор № 47",date:new Date,lastChange:{days:20,prediction:{status:"warning",days:25}}}}]},{title:"Агломашина №3",aglMachine:[{status:"danger",id:"У-171",title:"Эксгаузер У-171",onDetailsClick:()=>{t("/panel/machine/У-171")},rotor:{title:"Ротор № 37",date:new Date,lastChange:{days:6,prediction:{status:"danger",days:12}},bearings:[{title:"№3 п-к",items:[{status:"warning",type:"T"}]},{title:"№8 п-к",items:[{status:"ok",type:"L"},{type:"V",status:"danger"}]},{title:"№9 п-к",items:[{status:"ok",type:"T"},{status:"ok",type:"V"}]}]}},{status:"ok",id:"У-172",onDetailsClick:()=>{t("/panel/machine/У-172")},title:"Эксгаузер У-172",rotor:{title:"Ротор № 47",date:new Date,lastChange:{days:20,prediction:{status:"warning",days:25}}}}]}];return e.jsx("div",{className:"mt-4 grid grid-cols-3 gap-8",children:s.map(l=>e.jsx(C,{...l},l.title))})}function C(t){return e.jsxs("div",{children:[e.jsx("div",{className:"w-full rounded-lg bg-gray-40 py-2 px-6 text-gray-700",children:t.title}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:t.aglMachine.map((s,l)=>e.jsx(D,{...s},l))})]})}function D(t){return e.jsxs("div",{className:"mb-2 h-max rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-t-lg bg-gray-700 p-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:d("h-3 w-3 rounded-full",t.status==="ok"?"bg-green-800":"",t.status==="danger"?"bg-red-1000":"",t.status===void 0?"bg-gray-200":"")}),e.jsx("div",{className:"font-bold font-medium text-white",children:t.title})]}),e.jsx(u,{theme:"gray",className:"h-8 w-8 !p-0",onClick:t.onDetailsClick,children:e.jsx(f,{className:"h-5 w-5 fill-gray-400"})})]}),e.jsx("div",{className:"rounded-b-lg border-l-2 border-r-2 border-b-2 border-gray-100 p-2",children:t.rotor&&e.jsx(N,{...t.rotor})})]})}export{S as default};
