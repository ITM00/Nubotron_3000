import{j as e,r as n,c as j}from"./index-f1714d1d.js";import{c as d,B as c,b as f,d as b,G as o,e as y,f as v}from"./Button-3603d672.js";function N(t){return e.jsx("div",{...t,className:d(t.className,"rounded-lg bg-white")})}function x(t){const[s,r]=n.useState(t.initOpen),a=n.useCallback(()=>{r(i=>!i)},[]);return e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsxs("div",{className:"flex cursor-pointer items-center gap-2",onClick:a,children:[e.jsx(c,{theme:"gray",className:"h-6 w-6 !p-0",children:s?e.jsx(f,{className:"m-auto h-4  w-8"}):e.jsx(b,{className:"m-auto h-4  w-8"})}),e.jsx("div",{className:"text-sm font-bold",children:t.title})]}),s&&e.jsx("div",{className:"ml-6",children:t.children})]})}function m(t){return o({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"}}]})(t)}function u(t){return o({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M297.87 24.322c-40.38.374-80.665 13.623-114.077 39.72 73.64-37.01 166.104-24.977 227.547 36.464 61.442 61.44 73.013 153.443 36.002 227.084 57.598-73.738 53.068-180.48-14.77-248.317-37.098-37.098-85.97-55.4-134.703-54.95zm-27.25 63.123c-37.16.42-74.186 14.305-102.975 41.67 60.11-36.405 139.642-28.35 191.54 23.545 51.897 51.898 59.488 130.976 23.08 191.086 56.502-59.44 56.012-153.534-2.31-211.855C349.883 101.82 310.177 87 270.62 87.446zm-16.61 59.54c-28.304 0-56.606 10.797-78.2 32.392-43.19 43.19-43.19 113.214 0 156.404 43.188 43.19 113.21 43.19 156.4 0 43.19-43.19 43.19-113.213 0-156.403-21.594-21.595-49.897-32.393-78.2-32.393zm-132.635 28.4c-56.503 59.44-55.552 153.995 2.77 212.316 58.32 58.323 152.416 58.81 211.855 2.308-60.112 36.41-139.186 28.822-191.084-23.078-51.898-51.9-59.95-131.435-23.54-191.545zM56.297 191.54C-1.3 265.276 3.69 372.48 71.527 440.317c67.838 67.838 174.58 72.366 248.32 14.77-73.642 37.01-165.647 25.44-227.087-36.002-61.44-61.442-73.474-153.908-36.463-227.547z"}}]})(t)}function h(t){return o({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 3.1L7.05 8.05a7 7 0 1 0 9.9 0L12 3.1zm0-2.828l6.364 6.364a9 9 0 1 1-12.728 0L12 .272z"}}]}]})(t)}function w(t){const s=n.useMemo(()=>{var a;return(a=t.bearings)==null?void 0:a.filter(i=>{for(let l=0;l<i.items.length;l++)if(i.items[l].status!=="ok")return!0;return!1}).map((i,l)=>e.jsx(g,{...i},l))},[t.bearings]),r=n.useMemo(()=>{var a;return(a=t.bearings)==null?void 0:a.map((i,l)=>e.jsx(g,{...i},l))},[t.bearings]);return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm font-bold text-black",children:t.title}),e.jsx("div",{className:"rounded-lg bg-gray-200 p-1 text-xs",children:k(t.date)})]}),e.jsx("button",{className:"cursor-pointer text-sm text-purple-600 hover:underline",onClick:t.onChangeClick,children:"Изменить"})]}),e.jsx("div",{className:"w-full border border-solid border-b-gray-100"}),t.lastChange&&e.jsxs("div",{children:[e.jsx("div",{className:"ml-3 mb-2 text-sm font-bold text-black",children:"Последняя замена ротера"}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-gray-100 px-4 py-2",children:[e.jsxs("div",{className:"flex h-10 w-20 items-center justify-center rounded-lg bg-gray-200 font-bold",children:[t.lastChange.days," Сут"]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Прогноз"}),e.jsx("div",{className:d("h-2 w-2 rounded-full",t.lastChange.prediction.status==="ok"?"bg-green-300":"",t.lastChange.prediction.status==="warning"?"bg-yellow-500":"",t.lastChange.prediction.status==="danger"?"bg-red-500":"")})]}),e.jsxs("div",{className:"text-sm font-bold text-gray-600",children:[t.lastChange.prediction.days," Сут"]})]})]})]}),e.jsx("div",{className:"h-24 w-full rounded-lg border-2 border-solid border-gray-300 bg-gray-200"}),e.jsx(x,{initOpen:!0,title:"Предупреждение",children:e.jsx("div",{className:"flex flex-col gap-2",children:s})}),e.jsx(x,{title:"Все подшипники",children:e.jsx("div",{className:"flex flex-col gap-2",children:r})}),e.jsx(c,{onClick:t.onSendMessageClick,theme:"gray",className:"w-max border border-solid !border-gray-300 !bg-gray-100 !p-1 !text-sm font-normal !text-gray-500",children:"Отправить сообщение в SAP"})]})}const g=n.memo(function(s){return e.jsxs("div",{className:"flex items-center justify-between rounded bg-gray-100 px-4 py-2",children:[e.jsxs("div",{className:"text-sm",children:[s.title," ",e.jsx("span",{className:"text-xs",children:s.suffix})]}),e.jsx("div",{className:"flex items-center gap-2",children:s.items.map((r,a)=>e.jsx(C,{...r},a))})]},s.title)});function k(t){return String(t.getDay()<10?"0"+t.getDay():t.getDay())+"."+String(t.getMonth()+1<10?"0"+(t.getDay()+1):t.getDay()+1)+"."+String(t.getFullYear())}const C=n.memo(function(s){return e.jsxs("div",{className:d("inline-flex items-center justify-center rounded border border-solid px-2 ",s.status==="warning"?"border-yellow-400 bg-yellow-100 text-yellow-500":"",s.status==="danger"?"border-red-400 bg-red-100 text-red-500":"",s.status==="ok"?"border-gray-400 bg-gray-100 text-gray-500":""),children:[e.jsx("span",{children:s.type}),s.type==="T"?e.jsx(m,{}):s.type==="V"?e.jsx(u,{}):e.jsx(h,{})]})});function A(){return e.jsxs(N,{children:[e.jsx(M,{}),e.jsxs("div",{className:"p-2",children:[e.jsx(p,{}),e.jsx(D,{})]})]})}function M(){return e.jsxs("header",{className:"flex items-center gap-4 rounded-t-lg bg-gray-100 p-2",children:[e.jsx("div",{className:"rounded-lg bg-yellow-400 p-2 text-white",children:e.jsx(y,{className:"h-4 w-4"})}),e.jsx("div",{className:"font-bold",children:"Главный экран"})]})}function p(){const t=[{icon:e.jsx(m,{}),title:"Температура",letter:"T"},{icon:e.jsx(u,{}),title:"Вибрация",letter:"V"},{icon:e.jsx(h,{}),title:"Уровень масла",letter:"L"},{icon:e.jsx("div",{className:"h-3 w-3 bg-yellow-500"}),title:"Предупреждение"},{icon:e.jsx("div",{className:"h-3 w-3 bg-red-500"}),title:"Опастность"}];return e.jsx("div",{className:"flex items-center justify-end gap-3",children:t.map(s=>e.jsxs("div",{className:"flex items-center",children:[s.letter,s.icon,e.jsx("div",{className:"ml-2 text-sm text-gray-400",children:s.title})]},s.title))})}function D(){const t=[{title:"Агломашина №1"},{title:"Агломашина №2"},{title:"Агломашина №3"}];return e.jsx("div",{className:"mt-4 grid grid-cols-3 gap-8",children:t.map(s=>e.jsx(z,{...s},s.title))})}function z(t){const s=j(),r=[{status:"danger",id:"У-171",title:"Эксгаузер У-171",onDetailsClick:()=>{s("/panel/machine/У-171")},rotor:{title:"Ротор № 37",date:new Date,lastChange:{days:6,prediction:{status:"danger",days:12}},bearings:[{title:"№3",suffix:"п-к",items:[{status:"warning",type:"T"}]},{title:"№8",suffix:"п-к",items:[{status:"ok",type:"L"},{type:"V",status:"danger"}]},{title:"№9",suffix:"п-к",items:[{status:"ok",type:"T"},{status:"ok",type:"V"}]}]}},{status:"ok",id:"У-172",onDetailsClick:()=>{s("/panel/machine/У-172")},title:"Эксгаузер У-172",rotor:{title:"Ротор № 47",date:new Date,lastChange:{days:20,prediction:{status:"warning",days:25}}}}];return e.jsxs("div",{children:[e.jsx("div",{className:"w-full rounded-lg bg-gray-200 py-2 px-6 text-gray-600",children:t.title}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:r.map((a,i)=>e.jsx(B,{...a},i))})]})}function B(t){return e.jsxs("div",{className:"mb-2 h-max rounded-lg border border-solid border-zinc-400",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-t-lg bg-zinc-400 p-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:d("h-3 w-3 rounded-full",t.status==="ok"?"bg-green-300":"",t.status==="warning"?"bg-yellow-500":"",t.status==="danger"?"bg-red-500":"",t.status===void 0?"bg-gray-200":"")}),e.jsx("div",{className:"font-bold text-white",children:t.title})]}),e.jsx(c,{theme:"gray",className:"flex h-8 w-8 items-center justify-center !p-0",onClick:t.onDetailsClick,children:e.jsx(v,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("div",{className:"p-2",children:t.rotor&&e.jsx(w,{...t.rotor})})]})}export{A as default};
